// File made and modified by @tlgm2308 (Twitter).
// Please respect my works ;-;, and do not use my code without permissions!
{
  /*"anim_chat_alpha": {
    "anim_type": "alpha",
    "scale_from_starting_alpha": true,
    "easing": "in_cubic",
    "duration": 0.3,
    "from": 0.0,
    "to": 1.0
  },

  "anim_chat_offset": {
    "anim_type": "offset",
    "easing": "out_expo",
    "duration": 0.5,
    "from": [ "-50%", 0 ],
    "to": [ 0, 0 ]
  },

  "anim_chat_stack": {
    "anim_type": "size",
    "easing": "out_expo",
    "duration": 0.5,
    "from": [ "100%", 0 ],
    "to": [ "100%", "100%c" ]
  },*/

  "send_panel": {
    "$gamepad_helper_icon_description_background_visible": false
  },

  "messages_text/text": {
    "shadow": true,
    "size": [ "100% - 2px", "default" ],
    /*"anims": [
      "@chat.anim_chat_offset",
      "@chat.anim_chat_alpha"
    ],*/
    "bindings": [
      {
        "binding_name": "#text"
      },
      {
        "binding_name": "#text_tts"
      },
      {
        "ignored": "(not $use_chat_caret_mode_text_boxes)",
        "binding_type": "view",
        "source_control_name": "chat_caret_mode_toggle",
        "source_property_name": "(not #toggle_state)",
        "target_property_name": "#visible"
      }
    ]
  },

  "messages_text": {
    /*"anims": [
      "@chat.anim_chat_stack"
    ],*/
    "bindings": [
      {
        "binding_name": "#chat_visible"
      },
      {
        "binding_type": "view",
        "source_control_name": "chat_visibility_mode_toggle",
        "source_property_name": "#toggle_state",
        "target_property_name": "#chat_mode_state"
      },
      {
        "binding_type": "view",
        "source_property_name": "(#chat_visible or #chat_mode_state)",
        "target_property_name": "#visible_state"
      },
      {
        "binding_type": "view",
        "source_control_name": "chat_search_toggle",
        "source_property_name": "#toggle_state",
        "target_property_name": "#search_toggle_state"
      },
      {
        "binding_type": "view",
        "source_control_name": "chat_search_text_box_display_text",
        "source_property_name": "#item_name",
        "target_property_name": "#filtered_input"
      },
      {
        "binding_name": "#text"
      },
      {
        "binding_type": "view",
        "source_property_name": "(' ' + #text - '§0' - '§1' - '§2' - '§3' - '§4' - '§5' - '§6' - '§7' - '§8' - '§9' - '§a' - '§b' - '§c' - '§d' - '§e' - '§f' - '§g' - '§h' - '§i' - '§j' - '§k' - '§l' - '§m' - '§n' - '§o' - '§p' - '§q' - '§r' - '§s' - '§t' - '§u' - '§v' - '§w' - '§x' - '§y' - '§z' - '\n')",
        "target_property_name": "#filtered_text"
      },
      {
        "binding_type": "view",
        "source_property_name": "(not (#filtered_text - #filtered_input = #filtered_text) or #filtered_input = '')",
        "target_property_name": "#filtered_visible_state"
      },
      {
        "binding_type": "view",
        "source_property_name": "(#visible_state and (not #search_toggle_state or (#search_toggle_state and #filtered_visible_state)))",
        "target_property_name": "#visible"
      }
    ],
    "modifications": [
      {
        "array_name": "controls",
        "operation": "insert_back",
        "value": [
          {
            "caret_mode_text_box@chat.messages_text_caret_mode_text_box": {}
          }
        ]
      }
    ]
  },

  "messages_text_caret_mode_text_box": {
    "ignored": "(not $use_chat_caret_mode_text_boxes)",
    "type": "edit_box",
    "size": [ "100%", "100%cm" ],
    "focus_enabled": true,

    "layer": 10,

    "enabled_newline": true,
    "can_be_deselected": true,
    "max_length": 32767,

    "text_type": "ExtendedASCII",
    "text_box_name": "caret_mode_message_text_box",
    "hover_control": "hover",
    "pressed_control": "pressed",
    "text_control": "display_text",
    "place_holder_control": "place_holder_control",

    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "chat_caret_mode_toggle",
        "source_property_name": "#toggle_state",
        "target_property_name": "#visible"
      }
    ],
    "controls": [
      {
        "hover@common.focus_border_white": {
          "size": [ "100%", "100%sm" ],
          "layer": 2,
          "alpha": 0.8,
          "controls": [
            {
              "background": {
                "type": "image",
                "texture": "textures/ui/Black",
                "size": [ "100%", "100%" ],
                "alpha": 0.6,
                "layer": -2
              }
            }
          ]
        }
      },
      {
        "pressed@common.focus_border_white": {
          "texture": "textures/ui/focus_border_selected",
          "size": [ "100%", "100%sm" ],
          "layer": 2,
          "alpha": 0.8,
          "controls": [
            {
              "background": {
                "type": "image",
                "texture": "textures/ui/Black",
                "size": [ "100%", "100%" ],
                "alpha": 0.6,
                "layer": -2
              }
            }
          ]
        }
      },
      {
        "display_text": {
          "type": "label",
          "color": "$chat_text_color",
          "localize": false,
          "size": [ "100% - 2px", "default" ],
          "text": "#item_name",
          "layer": 3,

          "font_type": "$chat_font_type",
          "font_scale_factor": "$chat_font_scale_factor",
          "line_padding": "$chat_line_spacing",

          "$text_box_name": "caret_mode_message_text_box",
          "$newline_refresh": "#newline_refresh",

          "property_bag": {
            "#property_field": "#item_name"
          },
          "bindings": [
            {
              "binding_name": "#text"
            },
            {
              "binding_type": "view",
              "source_property_name": "#text",
              "target_property_name": "#item_name"
            },
            {
              "binding_name": "#newline_refresh"
            }
          ]
        }
      },
      {
        "place_holder_control@common.empty_panel": {
          "size": [ "100%", "100%sm" ]
        }
      },
      {
        "is_modified_overlay": {
          "type": "image",
          "texture": "textures/ui/White",
          "color": "$c_color_format",
          "alpha": 0.2,
          "size": [ "100%sm", "100%sm" ],
          "layer": 1,
          "bindings": [
            {
              "binding_type": "view",
              "source_control_name": "display_text",
              "source_property_name": "#item_name",
              "target_property_name": "#item_name",
              "resolve_sibling_scope": true
            },
            {
              "binding_name": "#text"
            },
            {
              "binding_type": "view",
              "source_property_name": "(not (' ' + #item_name = ' ' + #text))",
              "target_property_name": "#visible"
            }
          ]
        }
      }
    ],

    "$text_edit_box_hovered_button_id|default": "button.text_edit_box_hovered",

    "$text_edit_box_clear_from_button_id|default": "button.menu_clear",
    "$text_edit_box_clear_to_button_id|default": "button.text_edit_box_clear",
    "$text_edit_box_clear_scope|default": "view",

    "$text_edit_box_selected_to_button_id|default": "button.text_edit_box_selected",
    "$text_edit_box_deselected_to_button_id|default": "button.text_edit_box_deselected",

    "button_mappings": [
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$text_edit_box_selected_to_button_id",
        "handle_select": true,
        "handle_deselect": false,
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$text_edit_box_selected_to_button_id",
        "handle_select": false,
        "handle_deselect": true,
        "mapping_type": "global",
        "consume_event": false
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "$text_edit_box_selected_to_button_id",
        "handle_select": true,
        "handle_deselect": true,
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "$text_edit_box_selected_to_button_id",
        "handle_select": false,
        "handle_deselect": true,
        "mapping_type": "global"
      },
      {
        "from_button_id": "button.menu_cancel",
        "to_button_id": "$text_edit_box_deselected_to_button_id",
        "handle_select": false,
        "handle_deselect": true,
        "mapping_type": "global"
      },
      {
        "to_button_id": "$text_edit_box_hovered_button_id",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "$text_edit_box_clear_from_button_id",
        "to_button_id": "$text_edit_box_clear_to_button_id",
        "handle_select": false,
        "handle_deselect": false,
        "mapping_type": "focused"
      }
    ]
  },

  "blacklisted_messages_text": {
    "type": "image",
    "texture": "textures/ui/White",
    "size": [ "100%", "100%c" ],
    "color": "$dressing_room_dark_bg_color",
    "alpha": 0.8,
    "bindings": [
      {
        "binding_name": "#chat_visible"
      },
      {
        "binding_type": "view",
        "source_control_name": "chat_visibility_mode_toggle",
        "source_property_name": "#toggle_state",
        "target_property_name": "#chat_mode_state"
      },
      {
        "binding_type": "view",
        "source_property_name": "(#chat_visible or #chat_mode_state)",
        "target_property_name": "#visible_state"
      },
      {
        "binding_type": "view",
        "source_control_name": "chat_search_toggle",
        "source_property_name": "#toggle_state",
        "target_property_name": "#search_toggle_state"
      },
      {
        "binding_type": "view",
        "source_control_name": "chat_search_text_box_display_text",
        "source_property_name": "#item_name",
        "target_property_name": "#filtered_input"
      },
      {
        "binding_name": "#text"
      },
      {
        "binding_type": "view",
        "source_property_name": "(' ' + #text - '§0' - '§1' - '§2' - '§3' - '§4' - '§5' - '§6' - '§7' - '§8' - '§9' - '§a' - '§b' - '§c' - '§d' - '§e' - '§f' - '§g' - '§h' - '§i' - '§j' - '§k' - '§l' - '§m' - '§n' - '§o' - '§p' - '§q' - '§r' - '§s' - '§t' - '§u' - '§v' - '§w' - '§x' - '§y' - '§z' - '\n')",
        "target_property_name": "#filtered_text"
      },
      {
        "binding_type": "view",
        "source_property_name": "(not (#filtered_text - #filtered_input = #filtered_text) or #filtered_input = '')",
        "target_property_name": "#filtered_visible_state"
      },
      {
        "binding_type": "view",
        "source_property_name": "(#visible_state and (not #search_toggle_state or (#search_toggle_state and #filtered_visible_state)))",
        "target_property_name": "#visible"
      }
    ],
    "controls": [
      {
        "notifier_label": {
          "type": "label",
          "text": "chat.blacklistedMessageNotifier.label",
          "size": [ "100% - 2px", "default" ],
          "color": "$7_color_format",
          "shadow": true,
          "font_type": "$chat_font_type",
          "font_scale_factor": "$chat_font_scale_factor",
          "line_padding": "$chat_line_spacing",
          "layer": 1
        }
      }
    ]
  },

  "messages_text_filtered_blacklist": {
    "type": "panel",
    "size": [ "100%", "100%cm" ],
    "$blacklist_filter_source_property|default": false,
    "controls": [
      {
        "messages_text": {
          "type": "panel",
          "size": [ "100%", "100%cm" ],
          "bindings": [
            {
              "binding_name": "#text"
            },
            {
              "binding_type": "view",
              "source_property_name": "((' ' + #text + ' ') - '§0' - '§1' - '§2' - '§3' - '§4' - '§5' - '§6' - '§7' - '§8' - '§9' - '§a' - '§b' - '§c' - '§d' - '§e' - '§f' - '§g' - '§h' - '§i' - '§j' - '§k' - '§l' - '§m' - '§n' - '§o' - '§p' - '§q' - '§r' - '§s' - '§t' - '§u' - '§v' - '§w' - '§x' - '§y' - '§z')",
              "target_property_name": "#chat_text_truncated_formats"
            },
            {
              "binding_type": "view",
              "source_property_name": "$blacklist_filter_source_property",
              "target_property_name": "#blacklist_not_visible"
            },
            {
              "binding_type": "view",
              "source_control_name": "blacklisted_notifier_toggle_item",
              "source_property_name": "#toggle_state",
              "target_property_name": "#show_blacklisted_message",
              "resolve_sibling_scope": true
            },
            {
              "binding_type": "view",
              "source_property_name": "(#blacklist_not_visible or (not #blacklist_not_visible and #show_blacklisted_message))",
              "target_property_name": "#visible"
            }
          ],
          "controls": [
            {
              "message@chat.messages_text": {}
            }
          ]
        }
      },
      {
        "blacklisted_notifier": {
          "ignored": "(not $show_chat_blacklisted_message_hidden_notifier_in_chat_screen)",
          "type": "panel",
          "size": [ "100%", "100%cm" ],
          "layer": 1,
          "bindings": [
            {
              "binding_type": "view",
              "source_control_name": "messages_text",
              "source_property_name": "(not #blacklist_not_visible)",
              "target_property_name": "#blacklist_visible",
              "resolve_sibling_scope": true
            },
            {
              "binding_type": "view",
              "source_control_name": "blacklisted_notifier_toggle_item",
              "source_property_name": "#toggle_state",
              "target_property_name": "#show_blacklisted_message",
              "resolve_sibling_scope": true
            },
            {
              "binding_type": "view",
              "source_property_name": "(#blacklist_visible and not #show_blacklisted_message)",
              "target_property_name": "#visible"
            }
          ],
          "controls": [
            {
              "blacklisted_message@chat.blacklisted_messages_text": {}
            }
          ]
        }
      },
      {
        "blacklisted_notifier_toggle_item@common.toggle": {
          "layer": 0,
          "size": [ "100%", "100%sm" ],
          "$toggle_name": "blacklisted_notifier_toggle_item",
          "$toggle_group_forced_index": 0,

          "$toggle_tts_inherit_siblings": true,
          "tts_ignore_count": true,

          "$unchecked_control": "common.empty_panel",
          "$checked_control": "chat.blacklisted_notifier_badge",
          "$unchecked_hover_control": "chat.blacklisted_notifier_hovered_unchecked",
          "$checked_hover_control": "chat.blacklisted_notifier_hovered_checked",
          "$unchecked_locked_control": "common.empty_panel",
          "$checked_locked_control": "chat.blacklisted_notifier_badge",
          "$unchecked_locked_hover_control": "common.empty_panel",
          "$checked_locked_hover_control": "chat.blacklisted_notifier_badge",

          "button_mappings": [
            {
              "from_button_id": "button.menu_select",
              "to_button_id": "button.menu_select",
              "mapping_type": "pressed"
            },
            {
              "from_button_id": "button.menu_ok",
              "to_button_id": "button.menu_ok",
              "mapping_type": "focused"
            }
          ],
          "bindings": [
            {
              "binding_name": "#toggle_state",
              "binding_name_override": "#toggle_state"
            },
            {
              "binding_type": "view",
              "source_control_name": "messages_text",
              "source_property_name": "(not #blacklist_not_visible)",
              "target_property_name": "#visible",
              "resolve_sibling_scope": true
            },
            {
              "binding_type": "view",
              "source_control_name": "chat_caret_mode_toggle",
              "source_property_name": "#toggle_state",
              "target_property_name": "#caret_mode_state"
            },
            {
              "binding_type": "view",
              "source_property_name": "(not #toggle_state or (#toggle_state and not #caret_mode_state))",
              "target_property_name": "#enabled"
            },
            {
              "binding_name": "(not #tts_enabled)",
              "binding_name_override": "#focus_enabled"
            }
          ]
        }
      }
    ]
  },

  "blacklisted_notifier_badge": {
    "type": "image",
    "texture": "textures/ui/White",
    "size": [ 2, "100%" ],
    "color": "$4_color_format",
    "alpha": 0.8,
    "anchor_from": "right_middle",
    "anchor_to": "right_middle"
  },

  "blacklisted_notifier_hovered@common.focus_border_white": {
    "size": [ "100%", "100%" ],
    "layer": 1,
    "alpha": 0.8,
    "$label_bg_color|default": [ 0, 0, 0 ],
    "$label_bg_text|default": "",
    "$label_bg_text_alt|default": "",
    "$ignore_caret_mode_visible_condition|default": true,
    "controls": [
      {
        "background": {
          "type": "image",
          "texture": "textures/ui/Black",
          "size": [ "100%", "100%" ],
          "alpha": 0.2,
          "layer": -1
        }
      },
      {
        "label_with_background": {
          "type": "image",
          "texture": "textures/ui/White",
          "color": "$label_bg_color",
          "alpha": 0.8,
          "size": [ "100%c + 4px", "100% - 2px" ],
          "anchor_from": "right_middle",
          "anchor_to": "right_middle",
          "offset": [ -1, 0 ],
          "layer": 3,
          "bindings": [
            {
              "ignored": "$ignore_caret_mode_visible_condition",
              "binding_type": "view",
              "source_control_name": "chat_caret_mode_toggle",
              "source_property_name": "(not #toggle_state)",
              "target_property_name": "#visible"
            }
          ],
          "controls": [
            {
              "label": {
                "type": "label",
                "text": "$label_bg_text",
                "color": "white",
                "size": [ "default", "default" ],
                "max_size": [ 400, "100%" ],
                "anchor_from": "right_middle",
                "anchor_to": "right_middle",
                "layer": 1,
                "bindings": [
                  {
                    "ignored": "(not $use_chat_caret_mode_text_boxes)",
                    "binding_type": "view",
                    "source_control_name": "chat_caret_mode_toggle",
                    "source_property_name": "(not #toggle_state)",
                    "target_property_name": "#visible"
                  }
                ]
              }
            },
            {
              "label_alt": {
                "ignored": "(not $use_chat_caret_mode_text_boxes)",
                "type": "label",
                "text": "$label_bg_text_alt",
                "color": "white",
                "size": [ "default", "default" ],
                "max_size": [ 400, "100%" ],
                "anchor_from": "right_middle",
                "anchor_to": "right_middle",
                "layer": 1,
                "bindings": [
                  {
                    "binding_type": "view",
                    "source_control_name": "chat_caret_mode_toggle",
                    "source_property_name": "#toggle_state",
                    "target_property_name": "#visible"
                  }
                ]
              }
            }
          ]
        }
      }
    ]
  },

  "blacklisted_notifier_hovered_unchecked@chat.blacklisted_notifier_hovered": {
    "$label_bg_color": "$4_color_format",
    "$label_bg_text": "chat.blacklistedMessageNotifier.itemHovered.uncheckedLabel",
    "$label_bg_text_alt": "chat.blacklistedMessageNotifier.itemHovered.uncheckedLabelAlt"
  },

  "blacklisted_notifier_hovered_checked@chat.blacklisted_notifier_hovered": {
    "$label_bg_color": "$2_color_format",
    "$label_bg_text": "chat.blacklistedMessageNotifier.itemHovered.checkedLabel",
    "$label_bg_text_alt": "chat.blacklistedMessageNotifier.itemHovered.checkedLabelAlt",
    "$ignore_caret_mode_visible_condition": false
  },

  "message_tts_wrapper": {
    "$tts_label_panel": "chat.messages_text_filtered_blacklist"
  },

  "messages_stack_panel": {
    "$blacklist_filter_source_property": "(#chat_text_truncated_formats - ((' ' + $chat_blacklist_index_01 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_02 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_03 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_04 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_05 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_06 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_07 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_08 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_09 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_10 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_11 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_12 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_13 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_14 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_15 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_16 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_17 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_18 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_19 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_20 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_21 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_22 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_23 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_24 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_25 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_26 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_27 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_28 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_29 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_30 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_31 + ' ') - ' *' - '* ' - '  ') - ((' ' + $chat_blacklist_index_32 + ' ') - ' *' - '* ' - '  ') = #chat_text_truncated_formats)",
    "$use_chat_caret_mode_text_boxes|default": true,

    "factory": {
      "factory_variables": [
        "$blacklist_filter_source_property",
        "$show_chat_blacklisted_message_hidden_notifier_in_chat_screen",
        "$use_chat_caret_mode_text_boxes",
        "$chat_blacklist_index_01",
        "$chat_blacklist_index_02",
        "$chat_blacklist_index_03",
        "$chat_blacklist_index_04",
        "$chat_blacklist_index_05",
        "$chat_blacklist_index_06",
        "$chat_blacklist_index_07",
        "$chat_blacklist_index_08",
        "$chat_blacklist_index_09",
        "$chat_blacklist_index_10",
        "$chat_blacklist_index_11",
        "$chat_blacklist_index_12",
        "$chat_blacklist_index_13",
        "$chat_blacklist_index_14",
        "$chat_blacklist_index_15",
        "$chat_blacklist_index_16",
        "$chat_blacklist_index_17",
        "$chat_blacklist_index_18",
        "$chat_blacklist_index_19",
        "$chat_blacklist_index_20",
        "$chat_blacklist_index_21",
        "$chat_blacklist_index_22",
        "$chat_blacklist_index_23",
        "$chat_blacklist_index_24",
        "$chat_blacklist_index_25",
        "$chat_blacklist_index_26",
        "$chat_blacklist_index_27",
        "$chat_blacklist_index_28",
        "$chat_blacklist_index_29",
        "$chat_blacklist_index_30",
        "$chat_blacklist_index_31",
        "$chat_blacklist_index_32"
      ]
    }
  },

  "title_text": {
    "size": [ "default", "default" ],
    "anchor_from": "left_middle",
    "anchor_to": "left_middle",
    "offset": [ 0, 1 ],
    "layer": 2
  },

  "chat_icon": {
    "type": "image",
    "texture": "textures/ui/comment",
    "size": [ 24, 24 ],
    "anchor_from": "left_middle",
    "anchor_to": "left_middle",
    "offset": [ 20, -2 ],
    "layer": 1
  },

  "title_text/title_panel": {
    "font_type": "MinecraftTen",
    "font_scale_factor": 1.5,
    "size": [ "default", 18 ],
    "anchor_from": "left_middle",
    "anchor_to": "left_middle",
    "offset": [ 0, -2 ]
  },

  "back_content_panel": {
    "modifications": [
      {
        "control_name": "back_button",
        "operation": "replace",
        "value": [
          {
            "back_title_button@common.back_title_button": {
              "offset": [ 0, -1 ]
            } 
          }
        ]
      },
      {
        "control_name": "gamepad_back_helper",
        "operation": "remove"
      }
    ]
  },

  "coordinate_toggles": {
    "type": "panel",
    "size": [ 100, 16 ],

    "$radio_toggle_group": true,
    "$hover_texture": "textures/ui/button_borderless_light",
    "$pressed_texture": "textures/ui/button_borderless_lighthover",
    "$pressed_no_hover_texture": "textures/ui/button_borderless_lighthover",
    "$default_checked_text_color": "$light_toggle_default_text_color",

    "controls": [
      {
        "my_position@common_toggles.light_text_toggle": {
          "$toggle_name": "#coordinate_type_position",
          "$toggle_state_binding_name": "#coordinate_type_position",
          "$button_text": "chat.coordinateTypeFacing",
          "bindings": [
            {
              "binding_name": "#coordinate_type_facing",
              "binding_name_override": "#visible"
            }
          ]
        }
      },
      {
        "block_position@common_toggles.light_text_toggle": {
          "$toggle_name": "#coordinate_type_facing",
          "$toggle_state_binding_name": "#coordinate_type_facing",
          "$button_text": "chat.coordinateTypePosition",
          "bindings": [
            {
              "binding_name": "#coordinate_type_position",
              "binding_name_override": "#visible"
            }
          ]
        }
      }
    ]
  },

  "copy_coordinate_panel": {
    "type": "stack_panel",
    "orientation": "horizontal",
    "size": [ "100%c", 16 ],
    "anchor_from": "left_middle",
    "anchor_to": "left_middle",
    "bindings": [
      {
        "binding_name": "#chat_coordinate_dropdown_visible",
        "binding_name_override": "#visible",
        "binding_type": "global"
      }
    ],
    "controls": [
      {
        "coordinate_toggles@chat.coordinate_toggles": {}
      },
      {
        "coordinates_panel": {
          "type": "panel",
          "size": [ "100%c", 16 ],
          "controls": [
            {
              "coordinates_background_image": {
                "type": "image",
                "anchor_to": "center",
                "anchor_from": "center",
                "size": [ "100%c + 14px", 12 ],
                "min_size": [ 120, 12 ],
                "texture": "textures/ui/lightgreybars",
                "layer": 1,
                "controls": [
                  {
                    "coordinates_text": {
                      "type": "label",
                      "size": [ "default", 10 ],
                      "max_size": [ 300, 10 ],
                      "text": "#text",
                      "color": "$main_header_text_color",
                      "layer": 2,
                      "bindings": [
                        {
                          "binding_name": "#coordinates_text",
                          "binding_name_override": "#text"
                        }
                      ]
                    }
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "copy_coordinate_button@chat.copy_coordinate_button": {
          "size": [ 16, 16 ]
        }
      },
      {
        "icon@common.gamepad_helper_y": {
          "$gamepad_helper_size": [ 16, 16 ],
          "$gamepad_helper_icon_size": [ 16, 16 ],
          "$gamepad_helper_icon_image_size": [ 26, 26 ],
          "$icon_description_bind_type": "none",
          "$gamepad_helper_visible_binding_name": "#is_using_gamepad",
          "$gamepad_helper_icon_description_background_visible": false
        }
      },
      {
        "paste_button@chat.paste_button": {
          "size": [ 16, 16 ]
        }
      }
    ]
  },

  "chat_header/title_panel": {
    "size": [ "100%", 30 ],
    "controls": [
      {
        "back_button_content_panel@chat.back_content_panel": {
          "offset": [ 2, 0 ]
        }
      },
      { "chat_icon@chat.chat_icon": {} },
      {
        "popup_dialog_factory": {
          "type": "factory",
          "control_ids": {
            "toast_message": "@chat.popup_toast"
          }
        }
      },
      {
        "title_stack_panel": {
          "type": "stack_panel",
          "orientation": "horizontal",
          "size": [ "100% - 50px", 30 ],
          "anchor_from": "top_right",
          "anchor_to": "top_right",
          "offset": [ -2, -1 ],
          "controls": [
            {
              "title_panel_with_copy_coordinate": {
                "type": "panel",
                "size": [ "fill", "100%" ],
                "min_size": [ "100%cm", "100%" ],
                "controls": [
                  {
                    "title@chat.title_text": {
                      "bindings": [
                        {
                          "binding_name": "#chat_title_visible",
                          "binding_name_override": "#visible"
                        }
                      ]
                    }
                  },
                  {
                    "copy_coordinate_panel@chat.copy_coordinate_panel": {}
                  }
                ]
              }
            },
            {
              "toggles_panel_wrapper": {
                "type": "panel",
                "size": [ "100%c", "100%c" ],
                "controls": [
                  {
                    "toggles_panel": {
                      "type": "stack_panel",
                      "orientation": "horizontal",
                      "size": [ "100%c", "100%cm" ],
                      "offset": [ 0, 2 ],
                      "controls": [
                        {
                          "chat_search_toggle@chat.chat_search_toggle": {}
                        },
                        {
                          "padding_0": {
                            "type": "panel",
                            "size": [ 2, "100%sm" ],
                            "controls": [
                              {
                                "chat_search_popup@chat.chat_search_popup": {
                                  "anchor_from": "bottom_left",
                                  "anchor_to": "top_right",
                                  "offset": [ 0, 8 ]
                                }
                              }
                            ]
                          }
                        },
                        {
                          "chat_caret_mode_toggle@chat.chat_caret_mode_toggle": {}
                        },
                        {
                          "padding_1": {
                            "ignored": "(not $use_chat_caret_mode_text_boxes)",
                            "type": "panel",
                            "size": [ 2, 2 ]
                          }
                        },
                        {
                          "mute_all_chat_toggle@chat.mute_all_chat_toggle": {}
                        },
                        {
                          "padding_2": {
                            "type": "panel",
                            "size": [ 2, 2 ]
                          }
                        },
                        {
                          "chat_settings_button@chat.chat_settings_header_button": {}
                        }
                      ]
                    }
                  } 
                ]
              }
            } 
          ]
        }
      }
    ]
  },

  "anim_jump_to_bottom_updater": {
    "anim_type": "size",
    "easing": "out_expo",
    "duration": 0.05,
    "from": [ 0, 0.1 ],
    "to": [ 0, 0 ],
    "reset_event": "button.chat_scroll_jump_to_bottom"
  },

  "messages_stack_panel_with_jump_to_bottom_updater": {
    "type": "stack_panel",
    "orientation": "vertical",
    "size": [ "100%", "100%c" ],
    "$scrolling_content_anchor_from": "bottom_left",
    "$scrolling_content_anchor_to": "bottom_left",
    "controls": [
      {
        "jump_to_bottom_updater": {
          "type": "panel",
          "size": "@chat.anim_jump_to_bottom_updater",
          "animation_reset_name": "button.chat_scroll_jump_to_bottom"
        }
      },
      {
        "messages_stack_panel@chat.messages_stack_panel": {
          "size": [ "100%", "default" ]
        }
      }
    ]
  },

  "messages_scrolling_panel": {
    "size": [ "100%", "100%-57px" ],
    "offset": [ 0, -27 ],
    "$scroll_view_port_size": [ "100% - 2px", "100%" ],
    "$scrolling_content": "chat.messages_stack_panel_with_jump_to_bottom_updater",

    "$show_chat_blacklisted_message_hidden_notifier_in_chat_screen|default": true,
    "$chat_blacklist_index_01|default": "",
    "$chat_blacklist_index_02|default": "",
    "$chat_blacklist_index_03|default": "",
    "$chat_blacklist_index_04|default": "",
    "$chat_blacklist_index_05|default": "",
    "$chat_blacklist_index_06|default": "",
    "$chat_blacklist_index_07|default": "",
    "$chat_blacklist_index_08|default": "",
    "$chat_blacklist_index_09|default": "",
    "$chat_blacklist_index_10|default": "",
    "$chat_blacklist_index_11|default": "",
    "$chat_blacklist_index_12|default": "",
    "$chat_blacklist_index_13|default": "",
    "$chat_blacklist_index_14|default": "",
    "$chat_blacklist_index_15|default": "",
    "$chat_blacklist_index_16|default": "",
    "$chat_blacklist_index_17|default": "",
    "$chat_blacklist_index_18|default": "",
    "$chat_blacklist_index_19|default": "",
    "$chat_blacklist_index_20|default": "",
    "$chat_blacklist_index_21|default": "",
    "$chat_blacklist_index_22|default": "",
    "$chat_blacklist_index_23|default": "",
    "$chat_blacklist_index_24|default": "",
    "$chat_blacklist_index_25|default": "",
    "$chat_blacklist_index_26|default": "",
    "$chat_blacklist_index_27|default": "",
    "$chat_blacklist_index_28|default": "",
    "$chat_blacklist_index_29|default": "",
    "$chat_blacklist_index_30|default": "",
    "$chat_blacklist_index_31|default": "",
    "$chat_blacklist_index_32|default": ""
  },

  "commands_panel": {
    "size": [ "100%", "100%-57px" ],
    "bindings": [
      {
        "binding_name": "#chat_visible"
      },
      {
        "binding_type": "view",
        "source_control_name": "chat_visibility_mode_toggle",
        "source_property_name": "#toggle_state",
        "target_property_name": "#chat_mode_state"
      },
      {
        "binding_type": "view",
        "source_property_name": "(not (#chat_visible or #chat_mode_state))",
        "target_property_name": "#visible"
      }
    ]
  },

  "previous_image": {
    "type": "image",
    "size": [ 13, 13 ],
    "texture": "textures/ui/chat_previous"
  },

  "next_image": {
    "type": "image",
    "size": [ 13, 13 ],
    "texture": "textures/ui/chat_next"
  },

  "autocomplete_image": {
    "type": "image",
    "size": [ 14, 14 ],
    "texture": "textures/ui/chat_autocomplete"
  },

  "autocompleteback_image": {
    "type": "image",
    "size": [ 14, 14 ],
    "texture": "textures/ui/chat_autocompleteback"
  },

  "chat_settings_button": {
    "$focus_override_right": ""
  },

  "small_glyph_button@common_buttons.light_glyph_button": {
    "$button_content|default": "",
    "$pressed_button_name|default": "",
    "anchor_from": "bottom_right",
    "anchor_to": "bottom_right",
    "size": [ 27, 27 ]
  },

  "text_edit_box": {
    "$text_edit_text_control": "message_text_box_display_text",
    "$place_holder_text": "chat.placeHolderText",
    "$focus_override_left": "",
    "$focus_override_right": ""
  },

  "autocomplete_button@chat.small_glyph_button": {
    "$button_content": "chat.autocomplete_image",
    "$pressed_button_name": "button.chat_autocomplete",
    "$focus_id": "autocomplete_button_focus_id",
    "$button_tts_header": "accessibility.chat.tts.autocomplete"
  },

  "autocompleteback_button@chat.small_glyph_button": {
    "$button_content": "chat.autocompleteback_image",
    "$pressed_button_name": "button.chat_autocomplete_back",
    "$focus_id": "autocompleteback_button_focus_id",
    "$button_tts_header": "accessibility.chat.tts.autocompleteback"
  },

  "previous_button@chat.small_glyph_button": {
    "$button_content": "chat.previous_image",
    "$pressed_button_name": "button.chat_previous_message",
    "$focus_id": "previous_button_focus_id",
    "$button_tts_header": "accessibility.chat.tts.previous"
  },

  "next_button@chat.small_glyph_button": {
    "$button_content": "chat.next_image",
    "$pressed_button_name": "button.chat_next_message",
    "$focus_id": "next_button_focus_id",
    "$button_tts_header": "accessibility.chat.tts.next"
  },

  "chat_visibility_mode_toggle@common_toggles.light_content_toggle_visibility_one_button_state": {
    "size": [ 27, 27 ],
    "$button_content": "chat.chat_visibility_mode_toggle_content",
    "$toggle_name": "chat_visibility_mode_toggle",
    "$toggle_group_forced_index": 2,
    "$focus_id": "chat_visibility_mode_toggle_focus_id",
    "$toggle_tts_header": "accessibility.chat.tts.visibilityModeToggle",
    "$toggle_tts_toggle_on_text": "accessibility.chat.tts.visibilityModeToggle.chat",
    "$toggle_tts_toggle_off_text": "accessibility.chat.tts.visibilityModeToggle.autocomplete"
  },

  "chat_visibility_mode_toggle_content": {
    "type": "panel",
    "controls": [
      {
        "autocomplete_icon": {
          "ignored": "$pressed_state",
          "type": "label",
          "text": "/_",
          "size": [ "default", 10 ],
          "color": "$text_color"
        }
      },
      {
        "chat_icon": {
          "ignored": "(not $pressed_state)",
          "type": "image",
          "texture": "textures/ui/flyout",
          "size": [ 16, 16 ]
        }
      },
      {
        "burst_frame": {
          "type": "image",
          "texture": "textures/ui/chat_visibility_burst_frame",
          "size": [ 22, 22 ],
          "color": "$text_color",
          "layer": 2
        }
      }
    ]
  },

  "autocomplete_button_focused_content": {
    "type": "panel",
    "controls": [
      {
        "auto_complete_focus_border@chat.click_autocomplete_is_focused": {
          "bindings": [
            {
              "binding_type": "collection",
              "binding_name": "#auto_complete_text",
              "binding_name_override": "#text",
              "binding_collection_name": "auto_complete"
            },
            {
              "binding_type": "view",
              "source_property_name": "(not ('%.2s' * ('R' + #text) = 'R/'))",
              "target_property_name": "#visible"
            }
          ]
        }
      },
      {
        "command_help_peek_background": {
          "type": "image",
          "texture": "textures/ui/Black",
          "size": [ "100%", "100%c" ],
          "layer": 30,
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "offset": [ 0, -1 ],
          "bindings": [
            {
              "binding_type": "collection",
              "binding_name": "#auto_complete_text",
              "binding_collection_name": "auto_complete"
            },
            {
              "binding_type": "view",
              "source_property_name": "('R' + #auto_complete_text)",
              "target_property_name": "#text"
            },
            {
              "binding_type": "view",
              "source_property_name": "('%.2s' * #text = 'R/')",
              "target_property_name": "#is_command_filler_help"
            },
            {
              "binding_type": "view",
              "source_property_name": "(not (#text - '§f§7 - §o' = #text))",
              "target_property_name": "#is_command_desc_help"
            },
            {
              "binding_type": "view",
              "source_property_name": "(#is_command_filler_help or #is_command_desc_help)",
              "target_property_name": "#visible"
            }
          ],
          "controls": [
            {
              "border@chat.click_autocomplete_is_focused": {
                "size": [ "100%", "100%cm + 2px" ],
                "controls": [
                  {
                    "autocomplete_command_view_full_text": {
                      "type": "label",
                      "color": "$chat_text_color",
                      "size": [ "100%", "default" ],
                      "anchor_from": "left_middle",
                      "anchor_to": "left_middle",
                      "offset": [ 2, 0 ],
                      "layer": 1,
                      "text": "#text",
                      "localize": false,
                      "bindings": [
                        {
                          "binding_type": "collection",
                          "binding_name": "#auto_complete_text",
                          "binding_collection_name": "auto_complete"
                        },
                        {
                          "binding_type": "view",
                          "source_property_name": "(not (('r' + #auto_complete_text - '/execute ... ') = ('r' + #auto_complete_text)))",
                          "target_property_name": "#has_execute_snippets"
                        },
                        {
                          "binding_type": "view",
                          "source_property_name": "(('T' + '/execute §z... §6>>§r ' + #has_execute_snippets) - 'T/execute §z... §6>>§r false' - 'true')",
                          "target_property_name": "#truncated_execute_syntax"
                        },
                        {
                          "binding_type": "view",
                          "source_property_name": "(('§z' + #truncated_execute_syntax) - 'T' + #auto_complete_text - '/execute ... ')",
                          "target_property_name": "#text"
                        }
                      ]
                    }
                  }
                ]
              }
            }
          ]
        }
      }
    ]
  },

  "auto_complete_panel_contents_with_item/text": {
    "max_size": [ "100%", 10 ],
    "hide_hyphen": true,
    "bindings": [
      {
        "binding_type": "collection",
        "binding_name": "#auto_complete_text",
        "binding_collection_name": "auto_complete"
      },
      {
        "binding_type": "view",
        "source_property_name": "(not (('r' + #auto_complete_text - '/execute ...') = ('r' + #auto_complete_text)))",
        "target_property_name": "#has_execute_snippets"
      },
      {
        "binding_type": "view",
        "source_property_name": "(('T' + '/execute §z... §6>>§r ' + #has_execute_snippets) - 'T/execute §z... §6>>§r false' - 'true')",
        "target_property_name": "#truncated_execute_syntax"
      },
      {
        "binding_type": "view",
        "source_property_name": "(('§z' + #truncated_execute_syntax) - 'T' + #auto_complete_text - '/execute ... ')",
        "target_property_name": "#text"
      }
    ]
  },

  "auto_complete_panel_contents_with_item/autocomplete_button": {
    "controls": [
      { "default": { "type": "panel" }},
      { "hover@chat.autocomplete_button_focused_content": {} },
      { "pressed@chat.autocomplete_button_focused_content": {} }
    ],
    "bindings": [
      {
        "binding_type": "collection_details",
        "binding_collection_name": "auto_complete"
      },
      {
        "binding_type": "collection",
        "binding_name": "#auto_complete_text",
        "binding_collection_name": "auto_complete"
      },
      {
        "binding_type": "view",
        "source_property_name": "(not (#auto_complete_text = '') and not ('R' + #auto_complete_text = 'R...'))",
        "target_property_name": "#visible"
      }
    ]
  },

  "chat_bottom_panel": {
    "modifications": [
      {
        "control_name": "chat_settings",
        "operation": "remove"
      },
      {
        "control_name": "text_box",
        "operation": "insert_before",
        "value": [
           { "previous_button@chat.previous_button": {} },
           { "next_button@chat.next_button": {} }
        ]
      },
      {
        "control_name": "text_box",
        "operation": "insert_after",
        "value": [
          {
            "auto_complete_buttons_panel": {
              "type": "stack_panel",
              "orientation": "horizontal",
              "size": [ "100%c", "100%" ],
              "bindings": [
                {
                  "binding_name": "(not #chat_visible)",
                  "binding_name_override": "#visible"
                }
              ],
              "controls": [
                { "chat_visibility_mode_toggle@chat.chat_visibility_mode_toggle": {} },
                { "autocompleteback_button@chat.autocompleteback_button": {} },
                { "autocomplete_button@chat.autocomplete_button": {} }
              ]
            }
          }
        ]
      }
    ]
  },

  "chat_screen": {
    "close_on_player_hurt": false,
    "$force_render_below": true,
    "$screen_content": "chat.chat_screen_content_with_varied_settings",
    "$header_safezone_control": "common_store.store_top_bar_filler",
    "$header_bar_control": "common_store.store_top_bar"
  },

  "chat_screen_content_with_varied_settings@tyel_subpack_settings.chat_screen_varied_settings": {
    "type": "panel",
    "$use_chat_caret_mode_text_boxes|default": true,
    "controls": [
      {
        "content@chat.chat_screen_content": {}
      }
    ]
  },

  "chat_screen_content/host_main_panel": {
    "layer": 100
  },

  "chat_screen_content": {
    "modifications": [
      {
        "array_name": "controls",
        "operation": "insert_back",
        "value": [
          {
            "jump_to_bottom_floating_button_panel": {
              "type": "panel",
              "size": [ 16, 16 ],
              "anchor_from": "bottom_right",
              "anchor_to": "bottom_right",
              "offset": [ -8, -29 ],
              "layer": 30,
              "bindings": [
                {
                  "binding_name": "#chat_visible"
                },
                {
                  "binding_type": "view",
                  "source_control_name": "chat_visibility_mode_toggle",
                  "source_property_name": "#toggle_state",
                  "target_property_name": "#chat_mode_state"
                },
                {
                  "binding_type": "view",
                  "source_property_name": "(#chat_visible or #chat_mode_state)",
                  "target_property_name": "#visible"
                }
              ],
              "controls": [
                {
                  "jump_to_bottom_updater_button@common_buttons.light_content_button": {
                    "$pressed_button_name": "button.chat_scroll_jump_to_bottom",
                    "$button_content": "chat.jump_to_bottom_updater_content",
                    "$focus_id": "jump_to_bottom_updater_focus_id",
                    "button_mappings": [
                      {
                        "from_button_id": "button.menu_select",
                        "to_button_id": "$pressed_button_name",
                        "mapping_type": "pressed"
                      },
                      {
                        "from_button_id": "button.menu_ok",
                        "to_button_id": "$pressed_button_name",
                        "mapping_type": "focused"
                      },
                      {
                        "from_button_id": "button.controller_back",
                        "to_button_id": "$pressed_button_name",
                        "mapping_type": "global"
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      }
    ]
  },

  "jump_to_bottom_updater_content": {
    "type": "image",
    "texture": "textures/ui/white_pixel_chevron_down",
    "size": [ 7, 4 ],
    "color": "$text_color",
    "variables": [
      {
        "requires": "$pressed_state",
        "$helper_offset": [ -16, -1 ]
      }
    ],
    "controls": [
      {
        "gamepad_helper_select@common.gamepad_helper_select": {
          "$hide_description": true,
          "offset": "$helper_offset",
          "$helper_offset|default": [ -16, 0 ]
        }
      }
    ]
  },

  "chat_background": {
    "controls": [
      {
        "black_gradient_behind_chat_text_box": {
          "type": "custom",
          "renderer": "gradient_renderer",
          "layer": -1,
          "color1": [ 0, 0, 0, 0 ],
          "color2": [ 0, 0, 0, 0.7 ],
          "size": [ "100%", 60 ],
          "anchor_from": "bottom_middle",
          "anchor_to": "bottom_middle"
        }
      }
    ]
  },

  "chat_toolbox_search": {
    "type": "stack_panel",
    "orientation": "horizontal",
    "size": [ 180, 24 ],
    "controls": [
      {
        "chat_search_text_box_panel": {
          "type": "panel",
          "size": [ "100%", "100%" ],
          "$text_edit_clipping_panel_size": [ "100% - 16px", 20 ],
          "controls": [
            {
              "chat_search_text_box@common.text_edit_box": {
                "layer": 2,
                "size": [ "100%", "100%" ],
                "$text_box_name": "chat_search_text_box",
                "$text_edit_text_control": "chat_search_text_box_display_text",
                "$place_holder_text": "chat.searchMessages.placeHolderText",
                "max_length": 100,

                "always_listening": true,

                "$text_edit_box_label_size": [ "default", 10 ],

                "$use_clear_text_box_button_bindings": true,
                "$clear_text_box_button_source": "clear_chat_search_text_box_button",

                "$focus_id": "text_edit_box_focus_id",
                "$focus_override_left": "chat_settings_button_focus_id",
                // focus override up and down are controlled with bindings
                "$text_box_tts_header": "accessibility.chat.tts.textboxSearchTitle",
                "bindings": [
                  {
                    "binding_name": "#text_edit_box_focus_override_up",
                    "binding_name_override": "#focus_change_up"
                  },
                  {
                    "binding_name": "#text_edit_box_focus_override_down",
                    "binding_name_override": "#focus_change_down"
                  }
                ],
                "button_mappings": [
                  {
                    "from_button_id": "button.menu_select",
                    "to_button_id": "$text_edit_box_selected_to_button_id",
                    "handle_select": true,
                    "handle_deselect": false,
                    "mapping_type": "pressed"
                  },
                  {
                    "from_button_id": "button.menu_select",
                    "to_button_id": "$text_edit_box_selected_to_button_id",
                    "handle_select": false,
                    "handle_deselect": true,
                    "mapping_type": "global",
                    "consume_event": false
                  },
                  {
                    "from_button_id": "button.menu_ok",
                    "to_button_id": "$text_edit_box_selected_to_button_id",
                    "handle_select": true,
                    "handle_deselect": true,
                    "mapping_type": "pressed"
                  },
                  {
                    "from_button_id": "button.menu_ok",
                    "to_button_id": "$text_edit_box_selected_to_button_id",
                    "handle_select": false,
                    "handle_deselect": true,
                    "mapping_type": "global"
                  },
                  {
                    "from_button_id": "button.menu_cancel",
                    "to_button_id": "$text_edit_box_deselected_to_button_id",
                    "handle_select": false,
                    "handle_deselect": true,
                    "mapping_type": "global"
                  },
                  {
                    "to_button_id": "$text_edit_box_hovered_button_id",
                    "mapping_type": "pressed"
                  },
                  {
                    "from_button_id": "$text_edit_box_clear_from_button_id",
                    "to_button_id": "$text_edit_box_clear_to_button_id",
                    "handle_select": false,
                    "handle_deselect": false,
                    "mapping_type": "focused"
                  },
                  {
                    "from_button_id": "button.controller_secondary_select",
                    "to_button_id": "button.chat_paste_coordinates",
                    "handle_select": true,
                    "handle_deselect": false,
                    "mapping_type": "global"
                  }
                ]
              }
            },
            {
              "clear_text_box@tyel_common.clear_custom_text_box_button": {
                "$clear_text_box_button_name": "clear_chat_search_text_box_button",
                "$clear_text_box_visibility_source": "chat_search_text_box_display_text",
                "anchor_from": "right_middle",
                "anchor_to": "right_middle",
                "offset": [ -2, 0 ],
                "layer": 10
              }
            }
          ]
        }
      }
    ]
  },

  "chat_search_popup": {
    "type": "image",
    "texture": "textures/ui/tooltip_default_background",
    "size": [ "100%c + 8px", "100%c + 8px" ],
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "chat_search_toggle",
        "source_property_name": "#toggle_state",
        "target_property_name": "#visible"
      }
    ],
    "controls": [
      {
        "chat_toolbox_search@chat.chat_toolbox_search": {}
      }
    ]
  },

  "mute_all_chat_toggle_content": {
    "type": "panel",
    "controls": [
      {
        "mute_off_icon": {
          "ignored": "$pressed_state",
          "type": "image",
          "texture": "textures/ui/mute_off",
          "size": [ 14, 14 ]
        }
      },
      {
        "mute_on_icon": {
          "ignored": "(not $pressed_state)",
          "type": "image",
          "texture": "textures/ui/mute_on",
          "size": [ 14, 14 ]
        }
      },
      {
        "tooltip@chat.header_button_tooltip_template": {
          "$tooltip_text": "chat.settings.muteAll",
          "$pressed_tooltip_text": "chat.settings.unmuteAll"
        }
      }
    ]
  },

  "chat_search_button_content": {
    "type": "panel",
    "controls": [
      {
        "unchecked_state_image": {
          "ignored": "$pressed_state",
          "type": "image",
          "texture": "textures/ui/spyglass_flat",
          "size": [ 9, 9 ],
          "color": "$text_color",
          "keep_ratio": true
        }
      },
      {
        "minimize_icon": {
          "ignored": "(not $pressed_state)",
          "type": "label",
          "text": "_",
          "localize": false,
          "color": "$text_color"
        }
      },
      {
        "tooltip@chat.header_button_tooltip_template": {
          "$tooltip_text": "chat.searchMessages",
          "$pressed_tooltip_text": "chat.searchMessages.hide"
        }
      }
    ]
  },

  "chat_caret_mode_button_content": {
    "type": "panel",
    "controls": [
      {
        "caret_off_image": {
          "ignored": "$pressed_state",
          "type": "label",
          "text": "Aa",
          "localize": false,
          "color": "$text_color"
        }
      },
      {
        "text_image": {
          "ignored": "(not $pressed_state)",
          "type": "label",
          "text": "Aa|",
          "localize": false,
          "color": "$text_color"
        }
      },
      {
        "tooltip@chat.header_button_tooltip_template": {
          "$tooltip_text": "chat.caretMode",
          "$pressed_tooltip_text": "chat.caretMode.disable"
        }
      }
    ]
  },

  "header_button_tooltip_template": {
    "visible": "$hover_state",
    "type": "image",
    "texture": "textures/ui/greyBorder",
    "layer": 100,
    "size": [ "100%cm + 12px", "100%cm + 8px" ],
    "anchor_from": "bottom_middle",
    "anchor_to": "top_right",
    "offset": [ 14, 16 ],
    "$tooltip_text|default": "",
    "$pressed_tooltip_text|default": "",
    "variables": [
      {
        "requires": "$pressed_state",
        "$tooltip_text": "$pressed_tooltip_text"
      }
    ],
    "controls": [
      {
        "content": {
          "type": "label",
          "text": "$tooltip_text",
          "color": "$f_color_format",
          "layer": 4
        }
      },
      {
        "chevron": {
          "type": "image",
          "texture": "textures/ui/tooltip_inverted_chevron",
          "layer": 1,
          "size": [ 19, 13 ],
          "offset": [ -4, 4 ],
          "anchor_from": "top_right",
          "anchor_to": "bottom_right"
        }
      }
    ]
  },

  "chat_header_toggle_template@common_toggles.light_content_toggle_visibility_one_button_state": {
    "$focus_override_up": "FOCUS_OVERRIDE_STOP",
    "$toggle_tts_header": "",
    "$toggle_tts_toggle_on_text": "$toggle_on_tts_header",
    "$toggle_tts_toggle_off_text": "$toggle_off_tts_header"
  },

  "chat_settings_header_button@common_buttons.light_content_button": {
    "size": [ 24, 24 ],
    "$button_content": "chat.gear_image",
    "$pressed_button_name": "button.open_chat_settings",
    "$button_tts_header": "chat.settings",
    "$focus_override_right": "FOCUS_OVERRIDE_STOP",
    "$focus_override_up": "FOCUS_OVERRIDE_STOP"
  },

  "chat_search_toggle@chat.chat_header_toggle_template": {
    "size": [ 24, 24 ],
    "$button_content": "chat.chat_search_button_content",
    "$toggle_name": "chat_search_toggle",
    "$toggle_view_binding_name": "chat_search_toggle",
    "$toggle_on_tts_header": "chat.searchMessages",
    "$toggle_off_tts_header": "chat.searchMessages.hide",
    "$toggle_group_forced_index": 1
  },

  "chat_caret_mode_toggle@chat.chat_header_toggle_template": {
    "ignored": "(not $use_chat_caret_mode_text_boxes)",
    "size": [ 24, 24 ],
    "$button_content": "chat.chat_caret_mode_button_content",
    "$toggle_name": "chat_caret_mode_toggle",
    "$toggle_view_binding_name": "chat_caret_mode_toggle",
    "$toggle_on_tts_header": "chat.caretMode",
    "$toggle_off_tts_header": "chat.caretMode.disable",
    "$toggle_group_forced_index": 1
  },

  "mute_all_chat_toggle@chat.chat_header_toggle_template": {
    "size": [ 24, 24 ],
    "$toggle_name": "hide_chat",
    "$toggle_view_binding_name": "#hide_chat",
    "$button_content": "chat.mute_all_chat_toggle_content",
    "$toggle_on_tts_header": "chat.settings.muteAll",
    "$toggle_off_tts_header": "chat.settings.unmuteAll"
  }
}
